# Encrypt Now Backend

Этот проект реализует бэкенд для безопасного мессенджера со сквозным шифрованием. Он построен с использованием FastAPI и использует PostgreSQL для хранения данных.

## Основная функциональность

- **Сквозное шифрование:** Фронтенд обрабатывает все операции шифрования и дешифрования. Пользователи генерируют сид-фразу, из которой затем получаются приватный и публичный ключи.
- **Структура зашифрованного сообщения:** Внутри зашифрованного пакета содержится отметка времени отправления. Она используется клиентом-получателем после расшифровки для дополнительной защиты от replay-атак.
- **Защита от Replay-атак на сервере:** Так как сервер не имеет доступа к содержимому пакетов, он реализует защиту иначе. Бэкенд хранит хеши последних 50 полученных сообщений для каждого получателя. Если приходит пакет, хеш которого совпадает с одним из сохраненных, он отклоняется как дубликат.
- **Безопасная передача данных:** Фронтенд отправляет POST-запросы, содержащие зашифрованные данные сообщений.
- **Идентификация получателя:** Публичный ключ получателя включается в заголовок запроса, выступая в качестве его уникального идентификатора.
- **Идентификация отправителя:** Публичный ключ отправителя включается в заголовок запроса, выступая в качестве его уникального идентификатора.
- **Хранение сообщений:** Бэкенд получает зашифрованные пакеты и сохраняет их в базе данных PostgreSQL, связывая сообщение с отправителем и получателем через их уникальные идентификаторы.
- **Доставка через вебхук:** Если клиент, связанный с указанным публичным ключом, ожидает вебхук, бэкенд перенаправит ему сохраненный зашифрованный пакет.

Этот бэкенд выступает в роли безопасного посредника, облегчая зашифрованную связь без доступа к незашифрованному содержимому сообщений.